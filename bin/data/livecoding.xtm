(io:osc:start-server 12345 "OF-receive-12345")
(define OF-server (cons "localhost" 12345))

(define-macro (playTSNE x y n)
	`(io:osc:send (now) OF-server "/point" ,x ,y ,n))


(define *metre1* (make-metre '(4) 1/2))

(define T-SNampler
  (lambda (beat dur)

	 	(if (*metre1* beat 1)
    (playTSNE (cosr 260 10 1/3) (sinr 415 10 1/2) 9))


       (callback (*metro* (+ beat (* .5 dur))) 'T-SNampler (+ beat dur) 1/8)))

(T-SNampler (*metro* 'get-beat 4) 1/8)
